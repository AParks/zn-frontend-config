<script type="text/ng-template" id="wgn-multi-config">

	<div>
		<div class="section">
			<button ng-click="onNewConfig()" type="button" class="btn btn-success create-config-button"
					ng-hide="loading" ng-disabled="editing.config">
				<i class="icon-plus"></i> Create Configuration
			</button>

			<h2><i class="icon-{{ settings.icon }}"></i> {{ settings.title }}</h2>

			<p class="multi-config-intro">{{ settings.help }}</p>
		</div>

		<span ng-show="loading" class="throbber"></span>

		<div class="multi-config-container" ng-hide="loading">
			<div class="section" ng-show="!editing.config && settings.multi">
				<wgn-multi-config-display-switcher></wgn-multi-config-display-switcher>

				<div class="multi-config-label">Configurations</div>

				<p ng-show="!configs.length" class="multi-config-empty">
					You don't have any configurations yet.
					<a href="javascript:" ng-click="onNewConfig()">Let's create one!</a>
				</p>

				<wgn-multi-config-list ng-show="configs.length"></wgn-multi-config-list>
			</div>

			<form class="form" name="wgnConfigForm" ng-submit="onSaveConfig()" ng-show="editing.config" novalidate>
				<div class="section">
					<div class="form-actions">
						<button type="button" class="btn btn-success pull-right" ng-click="onEnableConfig()"
								ng-show="settings.toggle && editing.config.$id && !editing.config.enabled"
								ng-disabled="wgnConfigForm.$invalid">
							<i class="icon-toggle-on"></i> Enable
						</button>

						<button type="button" class="btn btn-warning pull-right" ng-click="onDisableConfig()"
								ng-show="settings.toggle && editing.config.$id && editing.config.enabled"
								ng-disabled="wgnConfigForm.$invalid">
							<i class="icon-toggle-off"></i> Disable
						</button>

						<button type="button" class="btn btn-danger pull-right" ng-click="onDeleteConfig()"
								ng-show="settings.multi && editing.config.$id">
							<i class="icon-trash"></i> Delete
						</button>
					</div>

					<div class="control-group multi-config-name" ng-show="settings.multi">
						<label class="form-label config-title">Configuration Name</label>

						<div class="controls">
							<input type="text" class="form-control" name="configName"
								   ng-model="editing.config.name" wgn-validator-config-name>

							<span class="danger">required</span>

							<span class="help-block">Specify a unique name for this configuration.</span>

							<span class="help-block danger" ng-show="wgnConfigForm.$error.configName">
                        	The config name must be unique
                    	</span>
						</div>
					</div>

					<div ng-if="!settings.multi || (settings.multi && editing.config.name && !wgnConfigForm.$error.configName)">
						<div ng-if="settings.pages.length === 1">
							<wgn-multi-config-page specs="settings.pages[0]"></wgn-multi-config-page>
						</div>

						<div ng-if="settings.pages.length > 1">
							<ul class="nav nav-tabs">
								<li role="presentation" ng-repeat="page in settings.pages" ng-class="{active: view === page.id}">
									<a href="javascript:" ng-click="onSelectPage(page.id)">{{ page.name }}</a>
								</li>
							</ul>

							<div class="panel panel-default" ng-repeat="page in settings.pages" ng-show="view === page.id">
								<div class="panel-body">
									<wgn-multi-config-page specs="page"></wgn-multi-config-page>
								</div>
							</div>
						</div>
					</div>

				</div><!-- /.section -->

				<div class="form-actions bottom-actions">
					<button type="submit" class="btn btn-primary pull-right"
							ng-disabled="!wgnConfigForm.$dirty || wgnConfigForm.$invalid">
						Save configuration
					</button>

					<button type="button" class="btn pull-right" ng-click="onDiscardChanges()"
							ng-show="settings.multi || wgnConfigForm.$dirty">
						Cancel
					</button>

					<div class="required-fields pull-right" ng-show="wgnConfigForm.$error.required">
						Please fill all required fields
					</div>
				</div>
			</form>

		</div><!-- /.multi-config-container -->

	</div>
</script>
